# Test: grove prune skips dirty worktree
setup_workspace feature-dirty

exec grove add feature-dirty
exec sh -c 'echo "dirty content" > ../feature-dirty/dirty.txt'
exec git -C $WORK/testrepo branch -D feature-dirty
exec grove prune
stderr 'Would skip 1 worktree'
stderr 'feature-dirty'
stderr 'dirty, use --force'
exec grove prune --commit
stderr 'Skipped 1 worktree'
stderr 'feature-dirty'
exists ../feature-dirty
