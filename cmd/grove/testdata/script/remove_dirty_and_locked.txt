# Test: grove remove shows dirty error before locked error
setup_workspace dirty-plus-locked

exec grove add dirty-plus-locked
exec sh -c 'echo "dirty" > ../dirty-plus-locked/untracked.txt'
exec git -C $WORK/workspace/.bare worktree lock ../dirty-plus-locked

! exec grove remove dirty-plus-locked
stderr 'âœ— .*uncommitted changes'
! stderr 'is locked'
