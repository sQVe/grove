# Test: grove add preserves files from main worktree when running from workspace root
setup_workspace

# Create .gitignore with .env.local pattern (matches default preserve patterns)
cp $WORK/gitignore-env .gitignore
exec git add .gitignore
exec git commit -m 'add env.local to gitignore'

# Create .env.local file in main worktree
cp $WORK/env-local .env.local

# Run grove add from workspace root (not inside main worktree)
cd $WORK/workspace
exec grove add feature/from-root-preserve
stderr 'Created worktree at .*[/\\]feature-from-root-preserve'
exists feature-from-root-preserve/.env.local

-- gitignore-env --
.env.local

-- env-local --
ROOT_TEST=value
